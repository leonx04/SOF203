use master
go
CREATE DATABASE THITHU2
GO
USE THITHU2
GO

CREATE TABLE NHACUNGCAP(
	MaNCC NVARCHAR(20)PRIMARY KEY,
	TenNCC NVARCHAR(40) NOT NULL,
	DiaChi NVARCHAR(50) NOT NULL,
	DienThoai NVARCHAR(30)
);
GO
CREATE TABLE SANPHAM(
	MaSanPham NVARCHAR(20) PRIMARY KEY,
	TenSP NVARCHAR(50) NOT NULL,
	DonViTinh NVARCHAR(20) NOT NULL,
	SOLUONG INT NOT NULL,
	GIABAN MONEY NOT NULL
);
GO 
CREATE TABLE CHITIET_NCC(
	MaNCC NVARCHAR(20) ,
	MaSanPham NVARCHAR(20),
	GiaNhap MONEY NOT NULL,
	SOLUONG INT NOT NULL,
	NGAYNHAP DATE NOT NULL,
	FOREIGN KEY(MaNCC) REFERENCES NHACUNGCAP(MaNCC),
	FOREIGN KEY(MaSanPham) REFERENCES SANPHAM(MaSanPham)
);
GO
INSERT INTO NHACUNGCAP (MaNCC,TenNCC,DiaChi,DienThoai)
VALUES 
		('NCC01','NHA CUNG CAP 1','HA NOI','0123456789'),
		('NCC02','NHA CUNG CAP 2','HA NOI','0123456789'),
		('NCC03','NHA CUNG CAP 3','HA NOI','0123456789'),
		('NCC04','NHA CUNG CAP 4','HA NOI','0123456789'),
		('NCC05','NHA CUNG CAP 5','HA NOI','0123456789');
GO
INSERT INTO SANPHAM (MaSanPham,TenSP,DonViTinh,SOLUONG,GIABAN)
VALUES 
		('SP01','SAN PHAM 1','CHIEC',100,1000),
		('SP02','SAN PHAM 2','CHIEC',200,2000),
		('SP03','SAN PHAM 3','CHIEC',300,3000),
		('SP04','SAN PHAM 4','CHIEC',400,4000),
		('SP05','SAN PHAM 5','CHIEC',500,5000);
GO
INSERT INTO CHITIET_NCC (MaNCC,MaSanPham,GiaNhap,SOLUONG,NGAYNHAP)
VALUES 
		('NCC01','SP01',500,1000,'2023-02-11'),
		('NCC02','SP02',600,2000,'2023-02-12'),
		('NCC03','SP03',700,3000,'2023-02-13'),
		('NCC04','SP04',800,4000,'2023-02-13'),
		('NCC05','SP05',1000,5000,'2023-02-13');
GO
SELECT * FROM SANPHAM
SELECT * FROM NHACUNGCAP
SELECT * FROM CHITIET_NCC
--3
SELECT MaNCC, TenNCC FROM NHACUNGCAP
--4
SELECT * FROM SANPHAM
WHERE GIABAN > 2000
--5
UPDATE SANPHAM
SET SOLUONG = 1100
WHERE MaSanPham = 'SP01'

--6
DELETE FROM CHITIET_NCC
WHERE MaNCC = 'NCC02'

DELETE FROM NHACUNGCAP
WHERE MaNCC = 'NCC02'
